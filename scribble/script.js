var a=document.getElementById('drawingCanvas'),b=a.getContext('2d'),f=document.getElementById('penSize'),g=document.getElementById('penOpacity'),h=document.getElementById('penButton'),i=document.getElementById('eraserButton'),j=document.getElementById('clearCanvas'),k=document.getElementById('clearCanvasModal'),l=document.getElementById('clearCanvasNo'),m=document.getElementById('clearCanvasYes'),n=document.getElementById('currentMode'),o=document.getElementById('colorLabel'),p=document.getElementById('saveCanvas'),q=document.getElementById('penColor');function c(){a.width=window.innerWidth*0.9;a.height=window.innerHeight*0.7;b.fillStyle='white';let A=b.globalAlpha;b.globalAlpha=1.0;b.fillRect(0,0,a.width,a.height);b.globalAlpha=A}c();let d=!1;let e=!1;q.addEventListener('input',()=>o.style.color=q.value);h.addEventListener('click',()=>{e=!1;h.style.backgroundColor='#2a7bac';i.style.backgroundColor='#3498db'});i.addEventListener('click',()=>{e=!0;h.style.backgroundColor='#3498db';i.style.backgroundColor='#2a7bac'});j.addEventListener('click',()=>k.style.display='flex');l.addEventListener('click',()=>k.style.display='none');m.addEventListener('click',()=>{b.fillStyle='white';let _=b.globalAlpha;b.globalAlpha=1.0;b.fillRect(0,0,a.width,a.height);b.globalAlpha=_;k.style.display='none'});window.onclick=B=>{B.target==k&&(k.style.display='none')};p.addEventListener('click',()=>{let C=document.createElement('a');C.setAttribute('download','scribble.png');let _b=a.toDataURL('image/png');C.setAttribute('href',_b.replace(/^data:image\/png/,'data:application/octet-stream'));C.click()});a.addEventListener('mousedown',r);a.addEventListener('mouseup',s);a.addEventListener('mousemove',t);a.addEventListener('mouseleave',s);a.addEventListener('touchstart',r);a.addEventListener('touchend',s);a.addEventListener('touchmove',_a=>{_a.preventDefault();t(_a.touches[0])});function r(D){d=!0;var _B=u(a,D);b.moveTo(_B.x,_B.y);b.beginPath()}function s(){d=!1;b.closePath()}function t(_A){if(!d)return;var E=u(a,_A);b.lineWidth=f.value;b.lineCap='round';b.strokeStyle=e?'white':q.value;b.globalAlpha=g.value;b.lineTo(E.x,E.y);b.stroke();b.moveTo(E.x,E.y)}function u(aA,aB){var _c=aA.getBoundingClientRect();return{x:aB.clientX-_c.left,y:aB.clientY-_c.top}}
